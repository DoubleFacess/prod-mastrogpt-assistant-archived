<!DOCTYPE html>\n<html lang=\"en\">\n <head>\n  <meta charset=\"utf-8\"/>\n  <meta content=\"width=device-width,initial-scale=1\" name=\"viewport\"/>\n  <title>\n   Untitled :: Nuvolaris Community and MastroGPT\n  </title>\n  <link href=\"https://nuvolaris.github.io/nuvolaris/3.1.0/development/actions-new.html\" rel=\"canonical\"/>\n  <meta content=\"Antora 3.1.7\" name=\"generator\"/>\n  <link href=\"../../../assets/css/site.css\" rel=\"stylesheet\"/>\n  <script async=\"\" src=\"https://www.googletagmanager.com/gtag/js?id=G-0WXXCQMZB6\">\n  </script>\n  <script>\n   function gtag(){dataLayer.push(arguments)};window.dataLayer=window.dataLayer||[];gtag('js',new Date());gtag('config','G-0WXXCQMZB6')\n  </script>\n </head>\n <body class=\"article\">\n  <header class=\"header\">\n   <nav class=\"navbar\">\n    <div class=\"navbar-brand\">\n     <a class=\"navbar-item\" href=\"https://nuvolaris.github.io\">\n      Nuvolaris Community and MastroGPT\n     </a>\n     <button class=\"navbar-burger\" data-target=\"topbar-nav\">\n      <span>\n      </span>\n      <span>\n      </span>\n      <span>\n      </span>\n     </button>\n    </div>\n    <div class=\"navbar-menu\" id=\"topbar-nav\">\n     <div class=\"navbar-end\">\n      <a class=\"navbar-item\" href=\"#\">\n       Home\n      </a>\n      <a class=\"navbar-item\" href=\"https://github.com/nuvolaris/nuvolaris-bugs/issues\">\n       Report Bugs\n      </a>\n      <a class=\"navbar-item\" href=\"https://nuvolaris.discourse.group\">\n       Get Help\n      </a>\n      <div class=\"navbar-item\">\n       <span class=\"control\">\n        <a class=\"button is-primary\" href=\"https://nuvolaris.github.io/nuvolaris/3.0.0/installation/download.html\">\n         Download\n        </a>\n       </span>\n      </div>\n     </div>\n    </div>\n   </nav>\n  </header>\n  <div class=\"body\">\n   <div class=\"nav-container\" data-component=\"nuvolaris\" data-version=\"3.1.0\">\n    <aside class=\"nav\">\n     <div class=\"panels\">\n      <div class=\"nav-panel-menu is-active\" data-panel=\"menu\">\n       <nav class=\"nav-menu\">\n        <h3 class=\"title\">\n         <a href=\"../index.html\">\n          Nuvolaris\n         </a>\n        </h3>\n        <ul class=\"nav-list\">\n         <li class=\"nav-item\" data-depth=\"0\">\n          <ul class=\"nav-list\">\n           <li class=\"nav-item\" data-depth=\"1\">\n            <button class=\"nav-item-toggle\">\n            </button>\n            <a class=\"nav-link\" href=\"../index.html\">\n             Welcome\n            </a>\n            <ul class=\"nav-list\">\n             <li class=\"nav-item\" data-depth=\"2\">\n              <a class=\"nav-link\" href=\"../quickstart.html\">\n               Quick Start\n              </a>\n             </li>\n             <li class=\"nav-item\" data-depth=\"2\">\n              <a class=\"nav-link\" href=\"../about.html\">\n               About Nuvolaris\n              </a>\n             </li>\n             <li class=\"nav-item\" data-depth=\"2\">\n              <a class=\"nav-link\" href=\"../whats-new.html\">\n               Whatâ€™s New?\n              </a>\n             </li>\n            </ul>\n           </li>\n          </ul>\n         </li>\n         <li class=\"nav-item\" data-depth=\"0\">\n          <ul class=\"nav-list\">\n           <li class=\"nav-item\" data-depth=\"1\">\n            <button class=\"nav-item-toggle\">\n            </button>\n            <a class=\"nav-link\" href=\"../mastrogpt/index.html\">\n             ðŸš§ MastroGPT\n            </a>\n            <ul class=\"nav-list\">\n             <li class=\"nav-item\" data-depth=\"2\">\n              <a class=\"nav-link\" href=\"../mastrogpt/environment.html\">\n               ðŸš§ Environment\n              </a>\n             </li>\n             <li class=\"nav-item\" data-depth=\"2\">\n              <a class=\"nav-link\" href=\"../mastrogpt/devel.html\">\n               ðŸš§ Development\n              </a>\n             </li>\n             <li class=\"nav-item\" data-depth=\"2\">\n              <a class=\"nav-link\" href=\"../mastrogpt/deploy.html\">\n               ðŸš§ Deployment\n              </a>\n             </li>\n            </ul>\n           </li>\n          </ul>\n         </li>\n         <li class=\"nav-item\" data-depth=\"0\">\n          <ul class=\"nav-list\">\n           <li class=\"nav-item\" data-depth=\"1\">\n            <button class=\"nav-item-toggle\">\n            </button>\n            <a class=\"nav-link\" href=\"../tutorial/index.html\">\n             Tutorial\n            </a>\n            <ul class=\"nav-list\">\n             <li class=\"nav-item\" data-depth=\"2\">\n              <a class=\"nav-link\" href=\"../tutorial/getting-started.html\">\n               Getting Started\n              </a>\n             </li>\n             <li class=\"nav-item\" data-depth=\"2\">\n              <a class=\"nav-link\" href=\"../tutorial/first-steps.html\">\n               First Steps\n              </a>\n             </li>\n             <li class=\"nav-item\" data-depth=\"2\">\n              <a class=\"nav-link\" href=\"../tutorial/form-validation.html\">\n               Form Validation\n              </a>\n             </li>\n             <li class=\"nav-item\" data-depth=\"2\">\n              <a class=\"nav-link\" href=\"../tutorial/use-database.html\">\n               Use Database\n              </a>\n             </li>\n             <li class=\"nav-item\" data-depth=\"2\">\n              <a class=\"nav-link\" href=\"../tutorial/notify-message.html\">\n               Sending Notifications\n              </a>\n             </li>\n             <li class=\"nav-item\" data-depth=\"2\">\n              <a class=\"nav-link\" href=\"../tutorial/packaging.html\">\n               App Deployment\n              </a>\n             </li>\n            </ul>\n           </li>\n          </ul>\n         </li>\n         <li class=\"nav-item\" data-depth=\"0\">\n          <ul class=\"nav-list\">\n           <li class=\"nav-item\" data-depth=\"1\">\n            <button class=\"nav-item-toggle\">\n            </button>\n            <a class=\"nav-link\" href=\"index.html\">\n             Development\n            </a>\n            <ul class=\"nav-list\">\n             <li class=\"nav-item\" data-depth=\"2\">\n              <button class=\"nav-item-toggle\">\n              </button>\n              <a class=\"nav-link\" href=\"index-entities.html\">\n               Entities\n              </a>\n              <ul class=\"nav-list\">\n               <li class=\"nav-item\" data-depth=\"3\">\n                <a class=\"nav-link\" href=\"actions.html\">\n                 Actions\n                </a>\n               </li>\n               <li class=\"nav-item\" data-depth=\"3\">\n                <a class=\"nav-link\" href=\"webactions.html\">\n                 Web Actions\n                </a>\n               </li>\n               <li class=\"nav-item\" data-depth=\"3\">\n                <a class=\"nav-link\" href=\"parameters.html\">\n                 Parameters\n                </a>\n               </li>\n               <li class=\"nav-item\" data-depth=\"3\">\n                <a class=\"nav-link\" href=\"annotations.html\">\n                 Annotations\n                </a>\n               </li>\n               <li class=\"nav-item\" data-depth=\"3\">\n                <a class=\"nav-link\" href=\"scheduler.html\">\n                 Scheduler\n                </a>\n               </li>\n               <li class=\"nav-item\" data-depth=\"3\">\n                <a class=\"nav-link\" href=\"packages.html\">\n                 Packages\n                </a>\n               </li>\n               <li class=\"nav-item\" data-depth=\"3\">\n                <a class=\"nav-link\" href=\"feeds.html\">\n                 Feeds\n                </a>\n               </li>\n              </ul>\n             </li>\n             <li class=\"nav-item\" data-depth=\"2\">\n              <button class=\"nav-item-toggle\">\n              </button>\n              <a class=\"nav-link\" href=\"index-runtimes.html\">\n               Runtimes\n              </a>\n              <ul class=\"nav-list\">\n               <li class=\"nav-item\" data-depth=\"3\">\n                <a class=\"nav-link\" href=\"actions-nodejs.html\">\n                 ðŸš§ Node\n                </a>\n               </li>\n               <li class=\"nav-item\" data-depth=\"3\">\n                <a class=\"nav-link\" href=\"actions-python.html\">\n                 ðŸš§ Python\n                </a>\n               </li>\n               <li class=\"nav-item\" data-depth=\"3\">\n                <a class=\"nav-link\" href=\"actions-go.html\">\n                 ðŸš§ Go\n                </a>\n               </li>\n               <li class=\"nav-item\" data-depth=\"3\">\n                <a class=\"nav-link\" href=\"actions-java.html\">\n                 ðŸš§ Java\n                </a>\n               </li>\n               <li class=\"nav-item\" data-depth=\"3\">\n                <a class=\"nav-link\" href=\"actions-php.html\">\n                 ðŸš§ PHP\n                </a>\n               </li>\n              </ul>\n             </li>\n             <li class=\"nav-item\" data-depth=\"2\">\n              <button class=\"nav-item-toggle\">\n              </button>\n              <a class=\"nav-link\" href=\"index-references.html\">\n               References\n              </a>\n              <ul class=\"nav-list\">\n               <li class=\"nav-item\" data-depth=\"3\">\n                <a class=\"nav-link\" href=\"rest_api.html\">\n                 Rest API\n                </a>\n               </li>\n               <li class=\"nav-item\" data-depth=\"3\">\n                <a class=\"nav-link\" href=\"scheduler.html\">\n                 Scheduler\n                </a>\n               </li>\n               <li class=\"nav-item\" data-depth=\"3\">\n                <a class=\"nav-link\" href=\"cli.html\">\n                 Advanced CLI\n                </a>\n               </li>\n               <li class=\"nav-item\" data-depth=\"3\">\n                <a class=\"nav-link\" href=\"reference.html\">\n                 Naming and Limits\n                </a>\n               </li>\n               <li class=\"nav-item is-current-page\" data-depth=\"3\">\n                <a class=\"nav-link\" href=\"actions-new.html\">\n                 Runtimes under the hood\n                </a>\n               </li>\n               <li class=\"nav-item\" data-depth=\"3\">\n                <a class=\"nav-link\" href=\"actions-actionloop.html\">\n                 Building your runtime\n                </a>\n               </li>\n              </ul>\n             </li>\n            </ul>\n           </li>\n          </ul>\n         </li>\n         <li class=\"nav-item\" data-depth=\"0\">\n          <ul class=\"nav-list\">\n           <li class=\"nav-item\" data-depth=\"1\">\n            <button class=\"nav-item-toggle\">\n            </button>\n            <a class=\"nav-link\" href=\"../cli/index.html\">\n             CLI\n            </a>\n            <ul class=\"nav-list\">\n             <li class=\"nav-item\" data-depth=\"2\">\n              <button class=\"nav-item-toggle\">\n              </button>\n              <a class=\"nav-link\" href=\"../cli/entities.html\">\n               Entities\n              </a>\n              <ul class=\"nav-list\">\n               <li class=\"nav-item\" data-depth=\"3\">\n                <a class=\"nav-link\" href=\"../cli/packages.html\">\n                 Packages\n                </a>\n               </li>\n               <li class=\"nav-item\" data-depth=\"3\">\n                <a class=\"nav-link\" href=\"../cli/actions.html\">\n                 Actions\n                </a>\n               </li>\n               <li class=\"nav-item\" data-depth=\"3\">\n                <a class=\"nav-link\" href=\"../cli/activations.html\">\n                 Activations\n                </a>\n               </li>\n               <li class=\"nav-item\" data-depth=\"3\">\n                <a class=\"nav-link\" href=\"../cli/sequences.html\">\n                 Sequences\n                </a>\n               </li>\n               <li class=\"nav-item\" data-depth=\"3\">\n                <a class=\"nav-link\" href=\"../cli/triggers.html\">\n                 Triggers\n                </a>\n               </li>\n               <li class=\"nav-item\" data-depth=\"3\">\n                <a class=\"nav-link\" href=\"../cli/rules.html\">\n                 Rules\n                </a>\n               </li>\n              </ul>\n             </li>\n             <li class=\"nav-item\" data-depth=\"2\">\n              <a class=\"nav-link\" href=\"../cli/project.html\">\n               ðŸš§ Project\n              </a>\n             </li>\n             <li class=\"nav-item\" data-depth=\"2\">\n              <a class=\"nav-link\" href=\"../cli/admin.html\">\n               Administration\n              </a>\n             </li>\n             <li class=\"nav-item\" data-depth=\"2\">\n              <a class=\"nav-link\" href=\"../cli/debug.html\">\n               Debugging\n              </a>\n             </li>\n            </ul>\n           </li>\n          </ul>\n         </li>\n         <li class=\"nav-item\" data-depth=\"0\">\n          <ul class=\"nav-list\">\n           <li class=\"nav-item\" data-depth=\"1\">\n            <button class=\"nav-item-toggle\">\n            </button>\n            <a class=\"nav-link\" href=\"../installation/index.html\">\n             Installation\n            </a>\n            <ul class=\"nav-list\">\n             <li class=\"nav-item\" data-depth=\"2\">\n              <a class=\"nav-link\" href=\"../installation/download.html\">\n               Download\n              </a>\n             </li>\n             <li class=\"nav-item\" data-depth=\"2\">\n              <button class=\"nav-item-toggle\">\n              </button>\n              <a class=\"nav-link\" href=\"../installation/prereq.html\">\n               Prerequisites\n              </a>\n              <ul class=\"nav-list\">\n               <li class=\"nav-item\" data-depth=\"3\">\n                <a class=\"nav-link\" href=\"../installation/prereq-docker.html\">\n                 Local Docker\n                </a>\n               </li>\n               <li class=\"nav-item\" data-depth=\"3\">\n                <button class=\"nav-item-toggle\">\n                </button>\n                <span class=\"nav-text\">\n                 <a class=\"xref page\" href=\"/nuvolaris/3.1.0/installation/prereq-server.html\">\n                  Linux\nServer\n                 </a>\n                </span>\n                <ul class=\"nav-list\">\n                 <li class=\"nav-item\" data-depth=\"4\">\n                  <a class=\"nav-link\" href=\"../installation/prereq-server-generic.html\">\n                   SSH and Sudo\n                  </a>\n                 </li>\n                 <li class=\"nav-item\" data-depth=\"4\">\n                  <a class=\"nav-link\" href=\"../installation/prereq-server-aws.html\">\n                   Server on AWS\n                  </a>\n                 </li>\n                 <li class=\"nav-item\" data-depth=\"4\">\n                  <a class=\"nav-link\" href=\"../installation/prereq-server-gcp.html\">\n                   Server on GCP\n                  </a>\n                 </li>\n                 <li class=\"nav-item\" data-depth=\"4\">\n                  <a class=\"nav-link\" href=\"../installation/prereq-k3s.html\">\n                   Install K3S\n                  </a>\n                 </li>\n                 <li class=\"nav-item\" data-depth=\"4\">\n                  <a class=\"nav-link\" href=\"../installation/prereq-mk8s.html\">\n                   Install MicroK8S\n                  </a>\n                 </li>\n                </ul>\n               </li>\n               <li class=\"nav-item\" data-depth=\"3\">\n                <button class=\"nav-item-toggle\">\n                </button>\n                <a class=\"nav-link\" href=\"../installation/prereq-kubernetes.html\">\n                 Kubernetes Cluster\n                </a>\n                <ul class=\"nav-list\">\n                 <li class=\"nav-item\" data-depth=\"4\">\n                  <a class=\"nav-link\" href=\"../installation/prereq-eks.html\">\n                   Amazon EKS\n                  </a>\n                 </li>\n                 <li class=\"nav-item\" data-depth=\"4\">\n                  <a class=\"nav-link\" href=\"../installation/prereq-aks.html\">\n                   Azure AKS\n                  </a>\n                 </li>\n                 <li class=\"nav-item\" data-depth=\"4\">\n                  <a class=\"nav-link\" href=\"../installation/prereq-gke.html\">\n                   Google GKE\n                  </a>\n                 </li>\n                 <li class=\"nav-item\" data-depth=\"4\">\n                  <a class=\"nav-link\" href=\"../installation/prereq-osh.html\">\n                   RedHat OpenShift\n                  </a>\n                 </li>\n                 <li class=\"nav-item\" data-depth=\"4\">\n                  <a class=\"nav-link\" href=\"../installation/prereq-cluster.html\">\n                   Generic Kubernetes\n                  </a>\n                 </li>\n                </ul>\n               </li>\n              </ul>\n             </li>\n             <li class=\"nav-item\" data-depth=\"2\">\n              <button class=\"nav-item-toggle\">\n              </button>\n              <a class=\"nav-link\" href=\"../installation/configure.html\">\n               Configure Nuvolaris\n              </a>\n              <ul class=\"nav-list\">\n               <li class=\"nav-item\" data-depth=\"3\">\n                <a class=\"nav-link\" href=\"../installation/configure-dns.html\">\n                 DNS and SSL\n                </a>\n               </li>\n               <li class=\"nav-item\" data-depth=\"3\">\n                <a class=\"nav-link\" href=\"../installation/configure-services.html\">\n                 Services\n                </a>\n               </li>\n              </ul>\n             </li>\n             <li class=\"nav-item\" data-depth=\"2\">\n              <button class=\"nav-item-toggle\">\n              </button>\n              <a class=\"nav-link\" href=\"../installation/install.html\">\n               Install Nuvolaris\n              </a>\n              <ul class=\"nav-list\">\n               <li class=\"nav-item\" data-depth=\"3\">\n                <a class=\"nav-link\" href=\"../installation/install-local.html\">\n                 Local Installation\n                </a>\n               </li>\n               <li class=\"nav-item\" data-depth=\"3\">\n                <a class=\"nav-link\" href=\"../installation/install-server.html\">\n                 Server Installation\n                </a>\n               </li>\n               <li class=\"nav-item\" data-depth=\"3\">\n                <a class=\"nav-link\" href=\"../installation/install-cluster.html\">\n                 Cluster Installation\n                </a>\n               </li>\n              </ul>\n             </li>\n             <li class=\"nav-item\" data-depth=\"2\">\n              <a class=\"nav-link\" href=\"../installation/debug.html\">\n               Troubleshooting\n              </a>\n             </li>\n            </ul>\n           </li>\n          </ul>\n         </li>\n        </ul>\n       </nav>\n      </div>\n      <div class=\"nav-panel-explore\" data-panel=\"explore\">\n       <div class=\"context\">\n        <span class=\"title\">\n         Nuvolaris\n        </span>\n        <span class=\"version\">\n         3.1 mastrogpt\n        </span>\n       </div>\n       <ul class=\"components\">\n        <li class=\"component is-current\">\n         <a class=\"title\" href=\"../index.html\">\n          Nuvolaris\n         </a>\n         <ul class=\"versions\">\n          <li class=\"version is-current is-latest\">\n           <a href=\"../index.html\">\n            3.1 mastrogpt\n           </a>\n          </li>\n          <li class=\"version\">\n           <a href=\"../../3.0.0/index.html\">\n            3 beta\n           </a>\n          </li>\n          <li class=\"version\">\n           <a href=\"../../0.2.2/index.html\">\n            0.2.2 mvp\n           </a>\n          </li>\n         </ul>\n        </li>\n       </ul>\n      </div>\n     </div>\n    </aside>\n   </div>\n   <main class=\"article\">\n    <div class=\"toolbar\" role=\"navigation\">\n     <button class=\"nav-toggle\">\n     </button>\n     <a class=\"home-link\" href=\"../index.html\">\n     </a>\n     <nav aria-label=\"breadcrumbs\" class=\"breadcrumbs\">\n      <ul>\n       <li>\n        <a href=\"../index.html\">\n         Nuvolaris\n        </a>\n       </li>\n       <li>\n        <a href=\"index.html\">\n         Development\n        </a>\n       </li>\n       <li>\n        <a href=\"index-references.html\">\n         References\n        </a>\n       </li>\n       <li>\n        <a href=\"actions-new.html\">\n         Runtimes under the hood\n        </a>\n       </li>\n      </ul>\n     </nav>\n     <div class=\"page-versions\">\n      <button class=\"version-menu-toggle\" title=\"Show other versions of page\">\n       3.1 mastrogpt\n      </button>\n      <div class=\"version-menu\">\n       <a class=\"version is-current\" href=\"actions-new.html\">\n        3.1 mastrogpt\n       </a>\n       <a class=\"version is-missing\" href=\"../../3.0.0/index.html\">\n        3 beta\n       </a>\n       <a class=\"version is-missing\" href=\"../../0.2.2/index.html\">\n        0.2.2 mvp\n       </a>\n      </div>\n     </div>\n     <div class=\"edit-this-page\">\n      <a href=\"https://github.com/nuvolaris/nuvolaris-documentation/edit/3.1.0/modules/development/pages/actions-new.adoc\">\n       Edit this Page\n      </a>\n     </div>\n    </div>\n    <div class=\"content\">\n     <aside class=\"toc sidebar\" data-levels=\"2\" data-title=\"Contents\">\n      <div class=\"toc-menu\">\n      </div>\n     </aside>\n     <article class=\"doc\">\n      <div class=\"sect1\">\n       <h2 id=\"_adding_action_language_runtimes\">\n        <a class=\"anchor\" href=\"#_adding_action_language_runtimes\">\n        </a>\n        Adding Action Language Runtimes\n       </h2>\n       <div class=\"sectionbody\">\n        <div class=\"paragraph\">\n         <p>\n          OpenWhisk and Nuvolaris supports\n          <a class=\"xref page\" href=\"index-runtimes.html\">\n           several\nlanguages and runtimes\n          </a>\n          but there may be other languages or runtimes\nthat are important for your organization, and for which you want tighter\nintegration with the platform.\n         </p>\n        </div>\n        <div class=\"paragraph\">\n         <p>\n          The platform is extensible and you can add new languages or runtimes (with custom packages and\nthird-party dependencies)\n         </p>\n        </div>\n        <div class=\"admonitionblock note\">\n         <table>\n          <tr>\n           <td class=\"icon\">\n            <i class=\"fa icon-note\" title=\"Note\">\n            </i>\n           </td>\n           <td class=\"content\">\n            <div class=\"paragraph\">\n             <p>\n              This guide describes the contract a runtime must satisfy. However all the Nuvolaris runtimes are implemented the\n              <a class=\"xref page\" href=\"actions-actionloop.html\">\n               using the ActionLoop Proxy\n              </a>\n              . This proxy is implemented in Go, already satifies the semantic of a runtime ands makes very easy to build a new runtime. You just need to provide  \"launcher code\" in your favorite programming language and a compilation script (generally written in python) for the initialization of an action. You are advised to use it for your own runtimes and use the material of this document as reference for the behaviour of a runtime.\n             </p>\n            </div>\n           </td>\n          </tr>\n         </table>\n        </div>\n        <div class=\"sect2\">\n         <h3 id=\"_runtime_general_requirements\">\n          <a class=\"anchor\" href=\"#_runtime_general_requirements\">\n          </a>\n          Runtime general requirements\n         </h3>\n         <div class=\"paragraph\">\n          <p>\n           The unit of execution for all functions is a\n           <a href=\"https://docs.docker.com\">\n            Docker container\n           </a>\n           which must implement a\nspecific\n           <a href=\"#action-interface\">\n            Action interface\n           </a>\n           that, in general\nperforms:\n          </p>\n         </div>\n         <div class=\"olist arabic\">\n          <ol class=\"arabic\">\n           <li>\n            <p>\n             <strong>\n              <a href=\"#initialization\">\n               Initialization\n              </a>\n             </strong>\n             - accepts an initialization\npayload (the code) and prepared for execution,\n            </p>\n           </li>\n           <li>\n            <p>\n             <strong>\n              <a href=\"#activation\">\n               Activation\n              </a>\n             </strong>\n             - accepts a runtime payload (the input\nparameters) and\n            </p>\n            <div class=\"ulist\">\n             <ul>\n              <li>\n               <p>\n                prepares the activation context,\n               </p>\n              </li>\n              <li>\n               <p>\n                runs the function,\n               </p>\n              </li>\n              <li>\n               <p>\n                returns the function result,\n               </p>\n              </li>\n             </ul>\n            </div>\n           </li>\n           <li>\n            <p>\n             <strong>\n              <a href=\"#logging\">\n               Logging\n              </a>\n             </strong>\n             - flushes all\n             <code>\n              stdout\n             </code>\n             and\n             <code>\n              stderr\n             </code>\n             logs and\nadds a frame marker at the end of the activation.\n            </p>\n           </li>\n          </ol>\n         </div>\n         <div class=\"paragraph\">\n          <p>\n           The specifics of the\n           <a href=\"#action-interface\">\n            Action interface\n           </a>\n           and its\nfunctions are shown below.\n          </p>\n         </div>\n        </div>\n        <div class=\"sect2\">\n         <h3 id=\"_the_runtimes_manifest\">\n          <a class=\"anchor\" href=\"#_the_runtimes_manifest\">\n          </a>\n          The runtimes manifest\n         </h3>\n         <div class=\"paragraph\">\n          <p>\n           Actions when created specify the desired runtime for the function via a\nproperty called\n           <code>\n            kind\n           </code>\n           . When using the\n           <code>\n            nuv\n           </code>\n           CLI, this is specified as\n           <code>\n            --kind &lt;runtime-kind&gt;\n           </code>\n           . The value is typically a string describing the\nlanguage (e.g.,\n           <code>\n            nodejs\n           </code>\n           ) followed by a colon and the version for the\nruntime as in\n           <code>\n            nodejs:20\n           </code>\n           or\n           <code>\n            php:8.1\n           </code>\n           .\n          </p>\n         </div>\n         <div class=\"paragraph\">\n          <p>\n           The manifest is a map of runtime family names to an array of specific\nkinds. As an example, the following entry add a new runtime family\ncalled\n           <code>\n            nodejs\n           </code>\n           with a single kind\n           <code>\n            nodejs:20\n           </code>\n           .\n          </p>\n         </div>\n         <div class=\"listingblock\">\n          <div class=\"content\">\n           <pre class=\"highlightjs highlight\"><code class=\"language-json hljs\" data-lang=\"json\">{\n  \"nodejs\": [{\n    \"kind\": \"nodejs:20\",\n    \"default\": true,\n    \"image\": {\n      \"prefix\": \"openwhisk\",\n      \"name\": \"action-nodejs-v20\",\n      \"tag\": \"latest\"\n    }\n  }]\n}</code></pre>\n          </div>\n         </div>\n         <div class=\"paragraph\">\n          <p>\n           The\n           <code>\n            default\n           </code>\n           property indicates if the corresponding kind should be\ntreated as the default for the runtime family. The JSON\n           <code>\n            image\n           </code>\n           structure defines the Docker image name that is used for actions of this\nkind (e.g.,\n           <code>\n            openwhisk/nodejs10action:latest\n           </code>\n           for the JSON example\nabove).\n          </p>\n         </div>\n        </div>\n        <div class=\"sect2\">\n         <h3 id=\"the-test-function\">\n          <a class=\"anchor\" href=\"#the-test-function\">\n          </a>\n          The test action\n         </h3>\n         <div class=\"paragraph\">\n          <p>\n           The standard test action is shown below in JavaScript. It should be\nadapted for the new language and added to the\n           <a href=\"../tests/dat/actions/unicode.tests\">\n            test artifacts directory\n           </a>\n           with\nthe name\n           <code>\n            &lt;runtime-kind&gt;.txt\n           </code>\n           for plain text file or\n           <code>\n            &lt;runtime-kind&gt;.bin\n           </code>\n           for a a binary file. The\n           <code>\n            &lt;runtime-kind&gt;\n           </code>\n           must\nmatch the value used for\n           <code>\n            kind\n           </code>\n           in the corresponding runtime manifest\nentry, replacing\n           <code>\n            :\n           </code>\n           in the kind with a\n           <code>\n            -\n           </code>\n           . For example, a plain text\nfunction for\n           <code>\n            nodejs:20\n           </code>\n           becomes\n           <code>\n            nodejs-20.txt\n           </code>\n           .\n          </p>\n         </div>\n         <div class=\"listingblock\">\n          <div class=\"content\">\n           <pre class=\"highlightjs highlight\"><code class=\"language-js hljs\" data-lang=\"js\">function main(args) {\n    var str = args.delimiter + \" â˜ƒ \" + args.delimiter;\n    console.log(str);\n    return { \"winter\": str };\n}</code></pre>\n          </div>\n         </div>\n        </div>\n        <div class=\"sect2\">\n         <h3 id=\"action-interface\">\n          <a class=\"anchor\" href=\"#action-interface\">\n          </a>\n          Action Interface\n         </h3>\n         <div class=\"paragraph\">\n          <p>\n           An action consists of the user function (and its dependencies) along\nwith a\n           <em>\n            proxy\n           </em>\n           that implements a canonical protocol to integrate with\nthe OpenWhisk and Nuvolaris platform.\n          </p>\n         </div>\n         <div class=\"paragraph\">\n          <p>\n           The proxy is a web server with two endpoints.\n          </p>\n         </div>\n         <div class=\"ulist\">\n          <ul>\n           <li>\n            <p>\n             It listens on port\n             <code>\n              8080\n             </code>\n             .\n            </p>\n           </li>\n           <li>\n            <p>\n             It implements\n             <code>\n              /init\n             </code>\n             to initialize the container.\n            </p>\n           </li>\n           <li>\n            <p>\n             It also implements\n             <code>\n              /run\n             </code>\n             to activate the function.\n            </p>\n           </li>\n          </ul>\n         </div>\n         <div class=\"paragraph\">\n          <p>\n           The proxy also prepares the execution context, and flushes the logs produced by the function to stdout and\nstderr.\n          </p>\n         </div>\n         <div class=\"sect3\">\n          <h4 id=\"initialization\">\n           <a class=\"anchor\" href=\"#initialization\">\n           </a>\n           Initialization\n          </h4>\n          <div class=\"paragraph\">\n           <p>\n            The initialization route is\n            <code>\n             /init\n            </code>\n            . It must accept a\n            <code>\n             POST\n            </code>\n            request\nwith a JSON object as follows:\n           </p>\n          </div>\n          <div class=\"literalblock\">\n           <div class=\"content\">\n            <pre>{\n  \"value\": {\n    \"name\" : String,\n    \"main\" : String,\n    \"code\" : String,\n    \"binary\": Boolean,\n    \"env\": Map[String, String]\n  }\n}</pre>\n           </div>\n          </div>\n          <div class=\"ulist\">\n           <ul>\n            <li>\n             <p>\n              <code>\n               name\n              </code>\n              is the name of the action.\n             </p>\n            </li>\n            <li>\n             <p>\n              <code>\n               main\n              </code>\n              is the name of the function to execute.\n             </p>\n            </li>\n            <li>\n             <p>\n              <code>\n               code\n              </code>\n              is either plain text or a base64 encoded string for binary\nfunctions (i.e., a compiled executable).\n             </p>\n            </li>\n            <li>\n             <p>\n              <code>\n               binary\n              </code>\n              is false if\n              <code>\n               code\n              </code>\n              is in plain text, and true if\n              <code>\n               code\n              </code>\n              is\nbase64 encoded.\n             </p>\n            </li>\n            <li>\n             <p>\n              <code>\n               env\n              </code>\n              is a map of key-value pairs of properties to export to the\nenvironment. And contains several properties starting with the\n              <code>\n               <em>\n                _OW\n               </em>\n              </code>\n              prefix that are specific to the running action.\n             </p>\n             <div class=\"ulist\">\n              <ul>\n               <li>\n                <p>\n                 <code>\n                  __OW_API_KEY\n                 </code>\n                 the API key for the subject invoking the action, this\nkey may be a restricted API key. This property is absent unless\nexplicitly\n                 <a class=\"xref page\" href=\"annotations.html#annotations-for-all-actions\">\n                  requested\n                 </a>\n                 .\n                </p>\n               </li>\n               <li>\n                <p>\n                 <code>\n                  <em>\n                   _OW_NAMESPACE\n                  </em>\n                 </code>\n                 the namespace for the _activation\n                 (this may not be\nthe same as the namespace for the action).\n                </p>\n               </li>\n               <li>\n                <p>\n                 <code>\n                  __OW_ACTION_NAME\n                 </code>\n                 the fully qualified name of the running action.\n                </p>\n               </li>\n               <li>\n                <p>\n                 <code>\n                  __OW_ACTION_VERSION\n                 </code>\n                 the internal version number of the running\naction.\n                </p>\n               </li>\n               <li>\n                <p>\n                 <code>\n                  __OW_ACTIVATION_ID\n                 </code>\n                 the activation id for this running action\ninstance.\n                </p>\n               </li>\n               <li>\n                <p>\n                 <code>\n                  __OW_DEADLINE\n                 </code>\n                 the approximate time when this initializer will have\nconsumed its entire duration quota (measured in epoch milliseconds).\n                </p>\n               </li>\n              </ul>\n             </div>\n            </li>\n           </ul>\n          </div>\n          <div class=\"paragraph\">\n           <p>\n            The initialization route is called exactly once by the OpenWhisk and Nuvolaris\nplatform, before executing a function. The route should report an error\nif called more than once. It is possible however that a single\ninitialization will be followed by many activations (via\n            <code>\n             /run\n            </code>\n            ). If an\n            <code>\n             env\n            </code>\n            property is provided, the corresponding environment variables\nshould be defined before the action code is initialized.\n           </p>\n          </div>\n          <div class=\"paragraph\">\n           <p>\n            <strong>\n             Successful initialization:\n            </strong>\n            The route should respond with\n            <code>\n             200 OK\n            </code>\n            if\nthe initialization is successful and the function is ready to execute.\nAny content provided in the response is ignored.\n           </p>\n          </div>\n          <div class=\"paragraph\">\n           <p>\n            <strong>\n             Failures to initialize:\n            </strong>\n            Any response other than\n            <code>\n             200 OK\n            </code>\n            is treated as\nan error to initialize. The response from the handler if provided must\nbe a JSON object with a single field called\n            <code>\n             error\n            </code>\n            describing the\nfailure. The value of the error field may be any valid JSON value. The\nproxy should make sure to generate meaningful log message on failure to\naid the end user in understanding the failure.\n           </p>\n          </div>\n          <div class=\"paragraph\">\n           <p>\n            <strong>\n             Time limit:\n            </strong>\n            Every action in OpenWhisk and Nuvolaris has a defined time limit (e.g.,\n60 seconds). The initialization must complete within the allowed\nduration. Failure to complete initialization within the allowed time\nframe will destroy the container.\n           </p>\n          </div>\n          <div class=\"paragraph\">\n           <p>\n            <strong>\n             Limitation:\n            </strong>\n            The proxy does not currently receive any of the activation\ncontext at initialization time. There are scenarios where the context is\nconvenient if present during initialization. This will require a change\nin the OpenWhisk and Nuvolaris platform itself. Note that even if the context is\navailable during initialization, it must be reset with every new\nactivation since the information will change with every execution.\n           </p>\n          </div>\n         </div>\n         <div class=\"sect3\">\n          <h4 id=\"activation\">\n           <a class=\"anchor\" href=\"#activation\">\n           </a>\n           Activation\n          </h4>\n          <div class=\"paragraph\">\n           <p>\n            The proxy is ready to execute a function once it has successfully\ncompleted initialization. The OpenWhisk and Nuvolaris platform will invoke the\nfunction by posting an HTTP request to\n            <code>\n             /run\n            </code>\n            with a JSON object\nproviding a new activation context and the input parameters for the\nfunction. There may be many activations of the same function against the\nsame proxy (viz. container). Currently, the activations are guaranteed\nnot to overlap â€” that is, at any given time, there is at most one\nrequest to\n            <code>\n             /run\n            </code>\n            from the OpenWhisk and Nuvolaris platform.\n           </p>\n          </div>\n          <div class=\"paragraph\">\n           <p>\n            The route must accept a JSON object and respond with a JSON object,\notherwise the OpenWhisk and Nuvolaris platform will treat the activation as a failure\nand proceed to destroy the container. The JSON object provided by the\nplatform follows the following schema:\n           </p>\n          </div>\n          <div class=\"literalblock\">\n           <div class=\"content\">\n            <pre>{\n  \"value\": JSON,\n  \"namespace\": String,\n  \"action_name\": String,\n  \"api_host\": String,\n  \"api_key\": String,\n  \"activation_id\": String,\n  \"transaction_id\": String,\n  \"deadline\": Number\n}</pre>\n           </div>\n          </div>\n          <div class=\"ulist\">\n           <ul>\n            <li>\n             <p>\n              <code>\n               value\n              </code>\n              is a JSON object and contains all the parameters for the\nfunction activation.\n             </p>\n            </li>\n            <li>\n             <p>\n              <code>\n               namespace\n              </code>\n              is the OpenWhisk and Nuvolaris namespace for the action (e.g.,\n              <code>\n               whisk-system\n              </code>\n              ).\n             </p>\n            </li>\n            <li>\n             <p>\n              <code>\n               action_name\n              </code>\n              is the\n              <a href=\"reference.md#fully-qualified-names\">\n               fully\nqualified name\n              </a>\n              of the action.\n             </p>\n            </li>\n            <li>\n             <p>\n              <code>\n               activation_id\n              </code>\n              is a unique ID for this activation.\n             </p>\n            </li>\n            <li>\n             <p>\n              <code>\n               transaction_id\n              </code>\n              is a unique ID for the request of which this\nactivation is part of.\n             </p>\n            </li>\n            <li>\n             <p>\n              <code>\n               deadline\n              </code>\n              is the deadline for the function.\n             </p>\n            </li>\n            <li>\n             <p>\n              <code>\n               api_key\n              </code>\n              is the API key used to invoke the action.\n             </p>\n            </li>\n           </ul>\n          </div>\n          <div class=\"paragraph\">\n           <p>\n            The\n            <code>\n             value\n            </code>\n            is the function parameters. The rest of the properties\nbecome part of the activation context which is a set of environment\nvariables constructed by capitalizing each of the property names, and\nprefixing the result with\n            <code>\n             <em>\n              OW_\n             </em>\n            </code>\n            . Additionally, the context must define\n            <code>\n             OW_API_HOST\n            </code>\n            whose value is the OpenWhisk and Nuvolaris API host. This value is\ncurrently provided as an environment variable defined at container\nstartup time and hence already available in the context.\n           </p>\n          </div>\n          <div class=\"paragraph\">\n           <p>\n            <strong>\n             Successful activation:\n            </strong>\n            The route must respond with\n            <code>\n             200 OK\n            </code>\n            if the\nactivation is successful and the function has produced a JSON object as\nits result. The response body is recorded as the\n            <a href=\"actions.md#understanding-the-activation-record\">\n             result of the\nactivation\n            </a>\n            .\n           </p>\n          </div>\n          <div class=\"paragraph\">\n           <p>\n            <strong>\n             Failed activation:\n            </strong>\n            Any response other than\n            <code>\n             200 OK\n            </code>\n            is treated as an\nactivation error. The response from the handler must be a JSON object\nwith a single field called\n            <code>\n             error\n            </code>\n            describing the failure. The value of\nthe error field may be any valid JSON value. Should the proxy fail to\nrespond with a JSON object, the OpenWhisk and Nuvolaris platform will treat the\nfailure as an uncaught exception. These two failures modes are\ndistinguished by the value of the\n            <code>\n             response.status\n            </code>\n            in the\nactivation record which is\n            <code>\n             application error\n            </code>\n            if the proxy returned an\n            <code>\n             error\n            </code>\n            object, and\n            <code>\n             action developer error\n            </code>\n            otherwise.\n           </p>\n          </div>\n          <div class=\"paragraph\">\n           <p>\n            <strong>\n             Time limit:\n            </strong>\n            Every action in OpenWhisk and Nuvolaris has a defined time limit (e.g.,\n60 seconds). The activation must complete within the allowed duration.\nFailure to complete activation within the allowed time frame will\ndestroy the container.\n           </p>\n          </div>\n         </div>\n         <div class=\"sect3\">\n          <h4 id=\"logging\">\n           <a class=\"anchor\" href=\"#logging\">\n           </a>\n           Logging\n          </h4>\n          <div class=\"paragraph\">\n           <p>\n            The proxy must flush all the logs produced during initialization and\nexecution and add a frame marker to denote the end of the log stream for\nan activation. This is done by emitting the token\n            <code>\n             XXX_THE_END_OF_A_WHISK_ACTIVATION_XXX\n            </code>\n            as the last log line for the\n            <code>\n             stdout\n            </code>\n            <em>\n             and\n            </em>\n            <code>\n             stderr\n            </code>\n            streams. Failure to\nemit this marker will cause delayed or truncated activation logs.\n           </p>\n          </div>\n         </div>\n        </div>\n        <div class=\"sect2\">\n         <h3 id=\"testing\">\n          <a class=\"anchor\" href=\"#testing\">\n          </a>\n          Testing\n         </h3>\n         <div class=\"sect3\">\n          <h4 id=\"action-interface-tests\">\n           <a class=\"anchor\" href=\"#action-interface-tests\">\n           </a>\n           Action Interface tests\n          </h4>\n          <div class=\"paragraph\">\n           <p>\n            The\n            <a href=\"#action-interface\">\n             Action interface\n            </a>\n            is enforced via a canonical\ntest suite which validates the initialization protocol, the runtime\nprotocol, ensures the activation context is correctly prepared, and that\nthe logs are properly framed. Your runtime should extend this test\nsuite, and of course include additional tests as needed.\n           </p>\n          </div>\n         </div>\n         <div class=\"sect3\">\n          <h4 id=\"_runtime_proxy_tests\">\n           <a class=\"anchor\" href=\"#_runtime_proxy_tests\">\n           </a>\n           Runtime proxy tests\n          </h4>\n          <div class=\"paragraph\">\n           <p>\n            The tests verify that the proxy can handle the following scenarios:\n           </p>\n          </div>\n          <div class=\"ulist\">\n           <ul>\n            <li>\n             <p>\n              Test the proxy can handle the identity functions (initialize and run).\n             </p>\n            </li>\n            <li>\n             <p>\n              Test the proxy can handle pre-defined environment variables as well as initialization parameters.\n             </p>\n            </li>\n            <li>\n             <p>\n              Test the proxy properly constructs the activation context.\n             </p>\n            </li>\n            <li>\n             <p>\n              Test the proxy can properly handle functions with Unicode characters.\n             </p>\n            </li>\n            <li>\n             <p>\n              Test the proxy can handle large payloads (more than 1MB).\n             </p>\n            </li>\n            <li>\n             <p>\n              Test the proxy can handle an entry point other than\n              <code>\n               main\n              </code>\n              .\n             </p>\n            </li>\n            <li>\n             <p>\n              Test the proxy does not permit re-initialization.\n             </p>\n            </li>\n            <li>\n             <p>\n              Test the error handling for an action returning an invalid response.\n             </p>\n            </li>\n            <li>\n             <p>\n              Test the proxy when initialized with no content.\n             </p>\n            </li>\n           </ul>\n          </div>\n          <div class=\"paragraph\">\n           <p>\n            The canonical test suite should be extended by the new runtime tests.\nAdditional tests will be required depending on the feature set provided\nby the runtime.\n           </p>\n          </div>\n          <div class=\"paragraph\">\n           <p>\n            Since the OpenWhisk and Nuvolaris platform is language and runtime agnostic, it is\ngenerally not necessary to add integration tests. That is the unit tests\nverifying the protocol are sufficient. However, it may be necessary in\nsome cases to modify the\n            <code>\n             nuv\n            </code>\n            CLI or other OpenWhisk and Nuvolaris clients. In which\ncase, appropriate tests should be added as necessary. The OpenWhisk and Nuvolaris\nplatform will perform a generic integration test as part of its basic\nsystem tests. This integration test will require a\n            <a href=\"#the-test-action\">\n             test function\n            </a>\n            to be available so that the test\nharness can create, invoke, and delete the action.\n           </p>\n          </div>\n         </div>\n        </div>\n       </div>\n      </div>\n     </article>\n    </div>\n   </main>\n  </div>\n  <footer class=\"footer\">\n   <p>\n    Â©2023 Nuvolaris Inc -\n    <a href=\"https://nuvolaris.github.io/nuvolaris/3.0.0/installation/download.html\">\n     Download Nuvolaris Community\n    </a>\n   </p>\n   <p>\n    Please report bugs in the\n    <a href=\"https://github.com/nuvolaris/nuvolaris-bugs/issues\">\n     Issue Tracker\n    </a>\n   </p>\n   <p>\n    Get help in our\n    <a href=\"https://nuvolaris.discourse.group\">\n     Discussion Forum\n    </a>\n   </p>\n  </footer>\n  <script data-ui-root-path=\"../../../assets\" id=\"site-script\" src=\"../../../assets/js/site.js\">\n  </script>\n  <script async=\"\" src=\"../../../assets/js/vendor/highlight.js\">\n  </script>\n </body>\n</html>